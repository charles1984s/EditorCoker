var TypeList_dxData,SpecList_dxData;function PageReady(){}function contentReady(e){"TypeList"==e.element[0].id?TypeList_dxData=$("#TypeList").dxDataGrid("instance"):"SpecList"==e.element[0].id&&(SpecList_dxData=$("#SpecList").dxDataGrid("instance"))}function dataSaving(e){var t;void 0!==e.newData?void 0!==e.newData.Title?t=e.newData.Title.substring(0,1):void 0!==e.newData.Type&&(t=e.newData.Type.substring(0,1)):void 0!==e.data&&(void 0!==e.data.Title?t=e.data.Title.substring(0,1):void 0!==e.data.Type&&(t=e.data.Type.substring(0,1)));-1=="~·`!！@#$￥%^…&*()（）—-_=+[]{}【】、|\\;:；：'\"“‘,./<>《》?？，。".indexOf(t)?(e.component.saveEditData(),TypeList_dxData.refresh(),SpecList_dxData.refresh()):(e.cancel=!0,co.sweet.error("資料錯誤","標籤名稱不可以符號開頭",null,null))}function editButtonClicked(e){e.component.option("editing.editRowKey",e.row.key)}function editButtonVisible(e){return!e.row.isEditing}function typeDeleteButtonClicked(e){co.Spec.CheckRelatSpec(e.row.key).done((function(t){if(null!=t.error)co.sweet.error("發生錯誤",t.error,null,!1);else if(t.success)co.sweet.confirm("刪除規格類型","確定刪除？規格類型刪除後不可復原","確　定","取　消",(function(){co.Spec.SpecDelect(e.row.key).done((function(){TypeList_dxData.refresh(),SpecList_dxData.refresh()}))}));else{var i=t.message.split(","),n=`已有規格綁定此類型：【${i[0]}】`;""!=i[1]&&(n+=`以及其他共${i[1]}個`),co.sweet.error("規格類型已綁定",n,null,!1)}}))}function specDeleteButtonClicked(e){co.Spec.CheckRelatProd(e.row.key).done((function(t){if(null!=t.error)co.sweet.error("發生錯誤",t.error,null,!1);else if(t.success)co.sweet.confirm("刪除規格","確定刪除？規格刪除後不可復原","確　定","取　消",(function(){co.Spec.SpecDelect(e.row.key).done((function(){TypeList_dxData.refresh(),SpecList_dxData.refresh()}))}));else{var i=t.message.split(","),n=`已有商品綁定此規格：【${i[1]}(商品編號${i[0]})】`;i[2]>0&&(n+=`以及其他共${i[2]}個`),co.sweet.error("規格已綁定",n,null,!1)}}))}function getType(e){return{store:DevExpress.data.AspNet.createStore({key:"Id",loadUrl:"/api/Specification/GetAllTypeList"})}}