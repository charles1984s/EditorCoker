var companyInfoIsEdit=!1;function PageReady(){const e=grapesInit({save:function(e,t){var a=$.Deferred();return co.WebMesnus.saveConten({Id:$("#gjs").data("id"),SaveHtml:e,SaveCss:t}).done((function(e){e.success?a.resolve():co.sweet.error(e.error)})),a.promise()},import:function(e,t){var a=$.Deferred();return co.WebMesnus.importConten({Id:$("#gjs").data("id"),SaveHtml:e,SaveCss:t}).done((function(e){e.success?a.resolve():co.sweet.error(e.error)})),a.promise()},getComponer:function(){var e=$.Deferred();return co.HtmlContent.GetAllComponent().done((function(t){t.success?e.resolve(t.list):co.sweet.error(resutlt.error)})),e.promise()}});setPage=function(t){co.WebMesnus.getConten(t).done((function(t){if(t.success){var a=co.Data.HtmlDecode(t.conten.saveHtml);e.setComponents(a),e.setStyle(t.conten.saveCss)}else co.sweet.error(t.error)}))},co.WebSite.getPrivacyAndTerms().done((function(e){e.success&&(2==e.message.split(" ").length?($("#PrivacyStatement").data("id",e.message.split(" ")[0]),$("#MembershipTerms").data("id",e.message.split(" ")[1])):($("#PrivacyStatement").data("id",0),$("#MembershipTerms").data("id",0)),$(".btn_privacy").on("click",(function(){0==$("#PrivacyStatement").data("id")?co.WebMesnus.createOrEdit({Id:0,Title:"隱私權聲明",RouterName:"footer_privacy",PageType:1,Visible:!1,SerNo:1e3,PopularVisible:!1,LanBar:!1,Icon:"empty"}).done((function(e){e.success&&($("#PrivacyStatement").data("id",e.message),$("#TopLine > .title").text("隱私權聲明頁面編輯"),window.location.hash="#privacy",MoveToCanvas($("#PrivacyStatement").data("id")))})):($("#TopLine > .title").text("隱私權聲明頁面編輯"),window.location.hash="#privacy",MoveToCanvas($("#PrivacyStatement").data("id")))})),$(".btn_terms").on("click",(function(){0==$("#MembershipTerms").data("id")?co.WebMesnus.createOrEdit({Id:0,Title:"會員條款說明",RouterName:"terms",PageType:1,Visible:!1,SerNo:1e3,PopularVisible:!1,LanBar:!1,Icon:"empty"}).done((function(e){console.log(e),e.success&&($("#MembershipTerms").data("id",e.message),$("#TopLine > .title").text("會員條款說明頁面編輯"),window.location.hash="#terms",MoveToCanvas($("#MembershipTerms").data("id")))})):($("#TopLine > .title").text("會員條款說明頁面編輯"),window.location.hash="#terms",MoveToCanvas($("#MembershipTerms").data("id")))})))})),$("#IconImageUpload").ImageUploadModalClear(),$(".btn_input_icon").on("click",(function(){$(".input_icon").click()})),$(".btn_input_logo").on("click",(function(){$(".input_logo").click()})),$(".btn_company_info_edit").on("click",(function(){companyInfoIsEdit=!companyInfoIsEdit,CompanyInfoEdit()})),$("#CompanyInfo > .form_btn > .btn_exit").on("click",CompanyInfoExit),$("#CompanyInfo > .form_btn > .btn_save").on("click",CompanyInfoSave),TWZipCodeInit(),HashDataEdit(),"onhashchange"in window?window.onhashchange=hashChange:setInterval(hashChange,1e3)}function hashChange(e){e?(HashDataEdit(),e.preventDefault()):console.log("HashChange錯誤")}function HashDataEdit(){if(""!=window.location.hash){if(window.currentHash!=window.location.hash){var e=window.location.hash.replace("#","");switch(console.log(e),e){case"privacy":void 0!==$("#PrivacyStatement").data("id")&&$("#PrivacyStatement").data("id")>0?MoveToCanvas($("#PrivacyStatement").data("id")):(window.location.hash="",keyId="");break;case"terms":void 0!==$("#MembershipTerms").data("id")&&$("#MembershipTerms").data("id")>0?MoveToCanvas($("#MembershipTerms").data("id")):(window.location.hash="",keyId="");break;default:window.location.hash="",keyId=""}}}else BackToMain()}function CompanyInfoEdit(){$this_form_input=$("#CompanyInfo > form > div input"),$this_form_select=$("#CompanyInfo > form > div select"),$this_form_btn=$("#CompanyInfo > .form_btn"),companyInfoIsEdit?($this_form_input.removeAttr("disabled"),$this_form_select.removeAttr("disabled"),$this_form_btn.addClass("d-flex")):($this_form_input.attr("disabled","disabled"),$this_form_select.attr("disabled","disabled"),$this_form_btn.removeClass("d-flex"))}function CompanyInfoExit(){companyInfoIsEdit=!1,CompanyInfoEdit()}function CompanyInfoSave(){companyInfoIsEdit=!1,CompanyInfoEdit()}function TWZipCodeInit(){var e,t;$TWzipcode=$("#TWzipcode"),$TWzipcode.twzipcode({zipcodeIntoDistrict:!0,countySel:"新北市",districtSel:"鶯歌區"}),e=$TWzipcode.children(".county"),t=$TWzipcode.children(".district"),e.children("select").attr({id:"SelectCity",class:"city form-select",disabled:"disabled"}),e.append("<label class='px-4 required' for='SelectCity'>縣市</label>");var a=e.children("select").children("option").first();a.text("請選擇縣市"),a.attr("disabled","disabled"),t.children("select").attr({id:"SelectTown",class:"town form-select",disabled:"disabled"}),t.append("<label class='required' for='SelectTown'>鄉鎮</label>");var o=t.children("select").children("option").first();o.text("請選擇鄉鎮"),o.attr("disabled","disabled")}function MoveToCanvas(e){$("#gjs").data("id",e),setPage(e),$("html,body").animate({scrollTop:0}),$("#TopLine > a").removeClass("d-none"),$("#WebDataMain").addClass("d-none"),$("#WebDataCanvas").removeClass("d-none")}function BackToMain(){$("#TopLine > a").addClass("d-none"),$("#TopLine > .title").text("網站資料"),$("#WebDataMain").removeClass("d-none"),$("#WebDataCanvas").addClass("d-none"),window.location.hash=""}