!function(e){"use strict";function r(e){return e&&e.__esModule&&e.default?e.default:e}"function"==typeof define&&define.amd?define((function(t,n,o){o.exports=e(r(t("devextreme/core/utils/ajax")),t("jquery").Deferred,t("jquery").extend,r(t("devextreme/data/custom_store")),r(t("devextreme/data/utils")))})):"object"==typeof module&&module.exports?module.exports=e(r(require("devextreme/core/utils/ajax")),require("jquery").Deferred,require("jquery").extend,r(require("devextreme/data/custom_store")),r(require("devextreme/data/utils"))):DevExpress.data.AspNet=e(DevExpress.utils.ajax||{sendRequest:jQuery.ajax},jQuery.Deferred,jQuery.extend,DevExpress.data.CustomStore,DevExpress.data.utils)}((function(e,r,t,n,o){"use strict";var u=["onLoading","onLoaded","onInserting","onInserted","onUpdating","onUpdated","onRemoving","onRemoved","onModifying","onModified","onPush","loadMode","cacheRawData","errorHandler"];function a(n){var a=n.key,l=n.loadUrl,c=n.loadMethod||"GET",y=n.loadParams,p="raw"===n.loadMode,m=n.updateUrl,g=n.insertUrl,v=n.deleteUrl,x=n.onBeforeSend,j=n.onAjaxError;function h(t,n,o,u){var i,d,s=r();function f(){e.sendRequest(o).then((function(e,r,t){u?u(s,e,t):s.resolve()}),(function(e,r){var t=function(e){var r=e.getResponseHeader("Content-Type"),t=e.responseText;if(!r)return null;if(0===r.indexOf("text/plain"))return t;if(0===r.indexOf("application/json")){var n=function(e){try{return JSON.parse(e)}catch(e){return null}}(t);if("string"==typeof n)return n;if("object"==typeof n)for(var o in n)if("string"==typeof n[o])return n[o];return t}return null}(e);if(j){var n={xhr:e,error:t};j(n),t=n.error}t?s.reject(t):s.reject(e,r)}))}return n&&!a?s.reject(new Error("Primary key is not specified (operation: '"+t+"', url: '"+o.url+"')")):("load"===t?(o.cache=!1,o.dataType="json"):o.dataType="text",x&&(d=x(t,o))&&"function"==typeof d.then&&(i=d),i?i.then(f,(function(e){s.reject(e)})):f()),s.promise()}function S(e,r){var n={};if(r&&(n.isCountQuery=r),e){["skip","take","requireTotalCount","requireGroupCount"].forEach((function(r){void 0!==e[r]&&(n[r]=e[r])}));var u=o.normalizeSortingInfo,a=e.group,i=e.filter,d=e.select;e.sort&&(n.sort=JSON.stringify(u(e.sort))),a&&(function(e){if(!Array.isArray(e))return!1;for(var r=0;r<e.length;r++)if("groupInterval"in e[r]||"isExpanded"in e[r])return!0;return!1}(a)||(a=u(a)),n.group=JSON.stringify(a)),Array.isArray(i)&&(f(i=t(!0,[],i)),n.filter=JSON.stringify(i)),e.totalSummary&&(n.totalSummary=JSON.stringify(e.totalSummary)),e.groupSummary&&(n.groupSummary=JSON.stringify(e.groupSummary)),d&&(Array.isArray(d)||(d=[d]),n.select=JSON.stringify(d))}return t(n,y),n}function O(e,r,t){var n=t.getResponseHeader("Content-Type"),o=n&&n.indexOf("application/json")>-1;e.resolve(o?JSON.parse(r):r)}var C={key:a,useDefaultSearch:!0,load:function(e){return h("load",!1,{url:l,method:c,data:S(e)},(function(e,r){i(e,r,(function(e){return[e.data,d(e)]}))}))},totalCount:!p&&function(e){return h("load",!1,{url:l,method:c,data:S(e,!0)},(function(e,r){i(e,r,(function(e){return[e.totalCount]}))}))},byKey:!p&&function(e){return h("load",!0,{url:l,method:c,data:S({filter:(r=e,Array.isArray(a)?a.map((function(e){return[e,r[e]]})):[a,r])})},(function(e,r){i(e,r,(function(e){return[e.data[0]]}))}));var r},update:m&&function(e,r){return h("update",!0,{url:m,method:n.updateMethod||"PUT",data:{key:s(e),values:JSON.stringify(r)}},O)},insert:g&&function(e){return h("insert",!0,{url:g,method:n.insertMethod||"POST",data:{values:JSON.stringify(e)}},O)},remove:v&&function(e){return h("delete",!0,{url:v,method:n.deleteMethod||"DELETE",data:{key:s(e)}})}};return u.forEach((function(e){var r=n[e];void 0!==r&&(C[e]=r)})),C}function i(e,r,t){var n;n=r,(r=Array.isArray(n)?{data:n}:"number"==typeof n?{totalCount:n}:n)&&"object"==typeof r?e.resolve.apply(e,t(r)):e.reject(new Error("Unexpected response received"))}function d(e){return{totalCount:"totalCount"in e?e.totalCount:-1,groupCount:"groupCount"in e?e.groupCount:-1,summary:e.summary||null}}function s(e){return"object"==typeof e?JSON.stringify(e):e}function f(e){e.forEach((function(r,t){Array.isArray(r)?f(r):"[object Date]"===Object.prototype.toString.call(r)&&(e[t]=function(e){function r(e,r){for(e=String(e);e.length<r;)e="0"+e;return e}var t=[1+e.getMonth(),"/",e.getDate(),"/",e.getFullYear()],n=e.getHours(),o=e.getMinutes(),u=e.getSeconds(),a=e.getMilliseconds();return n+o+u+a>0&&t.push(" ",r(n,2),":",r(o,2),":",r(u,2),".",r(a,3)),t.join("")}(r))}))}return{createStore:function(e){return new n(a(e))}}}));