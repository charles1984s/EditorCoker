var $btn_tag_save,$tag,$price_modal,priceModal,$techcert_body,techcertModal,tag_changedBySelectBox,tag_clearSelectionButton,tag_text,tag_list=[],tag_check_list=[];function TagListModalInit(){TagListModalElementInit(),tagModal=new bootstrap.Modal(document.getElementById("TagModal")),$("#TagModal").on("hidden.bs.modal",(function(){var t=[];tag_list.forEach((function(a){a.IsDeleted||t.push(a.FK_TId)})),getTagListDataGridInstance().selectRows(t)})),$btn_tag_save.on("click",(function(){tag_check_list.length>0?(tag_list.forEach((function(t){var a=tag_check_list.indexOf(t.FK_TId);a>-1?(t.IsDeleted=!1,tag_check_list.splice(a,1)):t.IsDeleted=!0})),tag_check_list.length>0&&tag_check_list.forEach((function(t){var a={Id:0};a.FK_TId=t,a.IsDeleted=!1,tag_list.push(a)}))):tag_list.forEach((function(t){t.IsDeleted=!0})),$tag.val(tag_text),tagModal.hide()}))}function TagListModalElementInit(){$tag=$("#InputTag"),$btn_tag_save=$(".btn_tag_save")}function getTagListDataGridInstance(){return $("#TagList").dxDataGrid("instance")}function TagList_ClearBtnInit(t){tag_clearSelectionButton=t.component}function TagList_ClearBtnClick(){tag_list.length>0&&tag_list.forEach((function(t){t.IsDeleted=!0})),getTagListDataGridInstance().clearSelection()}function TagList_SelectChange(t){var a=t.selectedRowsData;tag_check_list=[],a.length>0?(tag_text=a.map((t=>`${t.Title}`)).join("、"),a.forEach((function(t){tag_check_list.push(t.Id)}))):tag_text="無",tag_changedBySelectBox=!1,tag_clearSelectionButton.option("disabled",!a.length)}function TagDataClear(){tag_list=[],tag_check_list=[],tag_text="",$tag.val(""),getTagListDataGridInstance().clearSelection()}function TagDataSet(t){var a="";if(null!=t&&t.length>0){var e=[];t.forEach((function(t){var n={};n.Id=t.id,n.FK_TId=t.fK_TId,n.IsDeleted=!1,e.push(t.fK_TId),a=""==a?t.tag_Name:a+"、"+t.tag_Name,tag_list.push(n)})),getTagListDataGridInstance().selectRows(e)}$tag.val(""==a?"無":a)}function TagInitSet(t){tag_check_list=[],t.length>0?(tag_text=t.map((t=>`${t.title}`)).join("、"),t.forEach((function(t){tag_check_list.push(t.id)}))):tag_text="無",tag_changedBySelectBox=!1,tag_clearSelectionButton.option("disabled",!t.length),$btn_tag_save.trigger("click")}$.fn.extend({TagListModalInit:function(){$(this).find(".InputTag")}});