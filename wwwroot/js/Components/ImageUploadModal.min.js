function ImageUploadModalInit(a,e,t){t||e&&(a.find(".btn_input_pic").on("click",(function(a){a.preventDefault(),$(this).parents("div").first().prev(".input_pic").click()})),a.find(".input_pic").change((function(){var a=$(this).parents(".image_upload").first(),e=this.files[0],t=new FileReader;t.readAsDataURL(e),t.onload=function(t){var i={Id:0};i.File=e,i.Name=e.name,i.Link=t.target.result,void 0!==a.data("file")&&ImageDelect(a),a.data("file",i),ImageSetData(a)}})),a.find(".btn_img_delete").on("click",(function(a){a.preventDefault(),ImageDelect($(this).parents(".image_upload").first())}))),ImageUploadModalClear(a)}function ImageUploadModalClear(a){a.children("div").each((function(e,t){e>0?t.remove():(a.data("delectList",null),ImageClear(a))}))}function ImageDelect(a){if(a.find(".btn_input_pic").hasClass("has_image")){if(a.data("file").Id>0){var e=[];null!=a.data("delectList")&&(e=a.data("delectList")),e.push(a.data("file").Id),a.data("delectList",e)}ImageClear(a)}}function ImageClear(a){var e=a.find(".btn_input_pic");if(e.hasClass("has_image")){var t=a.find(".img_preview"),i=a.find(".file_name");t.addClass("d-none"),t.removeClass("d-none"),t.siblings("span").removeClass("d-none"),t.parents("button").first().removeClass("border-0"),e.removeClass("has_image"),a.data("file",null),t.attr("src",""),t.attr("alt",""),i.text("加入照片")}}function ImageUploadModalDataInsert(a,e,t,i){if(""!=e){var n={};n.Id=e,n.File=null,n.Name=i,n.Link=t,a.data("file",n),ImageSetData(a)}}function ImageSetData(a){var e=a.data("file");if(void 0===a.data("file")||null==a.data("file"));else{var t=a.find(".img_preview"),i=a.find(".btn_input_pic"),n=a.find(".file_name");t.removeClass("d-none"),t.siblings("span").addClass("d-none"),t.parents("button").first().addClass("border-0"),i.addClass("has_image"),t.attr("src",e.Link),t.attr("alt",e.Name),n.text(e.Name)}}