var $btn_webmenu_save,$webmenu,webmenu_changedBySelectBox,webmenu_clearSelectionButton,webmenu_text,webmenu_list=[],webmenu_check_list=[];function WebmenuListModalInit(){WebmenuListModalElementInit(),webmenuModal=new bootstrap.Modal(document.getElementById("WebmenuModal")),$("#WebmenuModal").on("hidden.bs.modal",(function(){var e=[];webmenu_list.forEach((function(n){n.IsDeleted||e.push(n.FK_MId)})),getWebmenuListDataGridInstance().selectRows(e)})),$btn_webmenu_save.on("click",(function(){webmenu_check_list.length>0?(webmenu_list.forEach((function(e){var n=webmenu_check_list.indexOf(e.FK_MId);n>-1?(e.IsDeleted=!1,webmenu_check_list.splice(n,1)):e.IsDeleted=!0})),webmenu_check_list.length>0&&webmenu_check_list.forEach((function(e){var n={Id:0};n.FK_MId=e,n.IsDeleted=!1,webmenu_list.push(n)}))):webmenu_list.forEach((function(e){e.IsDeleted=!0})),$webmenu.val(webmenu_text),webmenuModal.hide()}))}function WebmenuListModalElementInit(){$webmenu=$("#InputWebmenu"),$btn_webmenu_save=$(".btn_webmenu_save")}function getWebmenuListDataGridInstance(){return $("#WebmenuList").dxDataGrid("instance")}function WebmenuList_ClearBtnInit(e){webmenu_clearSelectionButton=e.component}function WebmenuList_ClearBtnClick(){webmenu_list.length>0&&webmenu_list.forEach((function(e){e.IsDeleted=!0})),getWebmenuListDataGridInstance().clearSelection()}function WebmenuList_SelectChange(e){var n=e.selectedRowsData;webmenu_check_list=[],n.length>0?(webmenu_text=n.map((e=>null!=e.Items?`${e.Title}(${e.Items})`:`${e.Title}`)).join("、"),$webmenu.val(webmenu_text),n.forEach((function(e){webmenu_check_list.push(e.Id)}))):(webmenu_text="無",$webmenu.val(webmenu_text)),webmenu_changedBySelectBox=!1,webmenu_clearSelectionButton.option("disabled",!n.length)}function WebmenuDataClear(){webmenu_list=[],webmenu_check_list=[],webmenu_text="",$webmenu.val(""),getWebmenuListDataGridInstance().clearSelection()}function WebmenuDataSet(e){if(null!=e){var n=[],t={};t.FK_MId=e,t.IsDeleted=!1,n.push(e),webmenu_list.push(t),getWebmenuListDataGridInstance().selectRows(n),""==$webmenu.val()&&$webmenu.val("載入中，請稍候...")}}