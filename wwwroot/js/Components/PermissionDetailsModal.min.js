!function(e){e.fn.extend({setData:function(o){const t=e(this),s=e("#chooice"),n=t.find("#chooiceRoles .list"),i=t.find("#chooiceUsers .list");return e("#PermissionDetailsModal .typeName").text(o.title),co.PowerManagement.GetPagePermission(o).done((function(o){o.success?(n.empty(),i.empty(),e(o.object.users).each((function(o,t){const n=e(s.html());n.find(".name").text(t.name),n.find("#chooiceInput + label").attr({for:`Users${t.id}`}),n.find("#chooiceInput").attr({id:`Users${t.id}`,name:"Users"}).prop("checked",t.isChecked).val(t.id),i.append(n)})),e(o.object.roles).each((function(o,t){const i=e(s.html());i.find(".name").text(t.name),i.find("#chooiceInput + label").attr({for:`Roles${t.id}`}),i.find("#chooiceInput").attr({id:`Roles${t.id}`,name:"Roles"}).prop("checked",t.isChecked).val(t.id),n.append(i)}))):co.sweet.error("資料取得錯誤","無法取得網站使用者，您可能不具有權限。")})),t.find(".btn_save").off("click").on("click",(function(){const e=co.Object.merge(o,co.Form.getJson("PermissionDetailsForm"));e.PageId=e.id,"string"==typeof e.Users&&(e.Users=[e.Users]),"string"==typeof e.Roles&&(e.Roles=[e.Roles]),delete e.id,co.PowerManagement.SavePagePermission(e).done((function(e){e.success?(co.sweet.success("成功","已成功列印"),t.modal("hide")):co.sweet.error("失敗","資料儲存失敗!")}))})),t}})}(jQuery);