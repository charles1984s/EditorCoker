"use strict";var PreLoader;function toggleFullScreen(){document.fullScreenElement&&null!==document.fullScreenElement||!document.mozFullScreen&&!document.webkitIsFullScreen?document.documentElement.requestFullScreen?document.documentElement.requestFullScreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullScreen&&document.documentElement.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()}!function(e){document.cookie.split(";");var t=new Date,o=co.Cookie.Get("endDateTime")?parseInt(co.Cookie.Get("endDateTime")):0;const a=function(){co.sweet.confirm("即將登出","登入時間超過二十分鐘，是否保持狀態?","是","登出",(function(){co.User.Check().done((function(e){e.success||co.sweet.error("連線失敗","延遲時間過久，您的登入狀態已被登出，請重新登入。",(function(){location.href="/"}),!1)})),setTimeout(a,co.Data.Time.ReCheckTime-1e3)}),(function(){co.User.Logout()}))};setTimeout(a,co.Data.Time.ReCheckTime-1e3),co.Cookie.Get("token")?o>t.getTime()+co.Data.Time.ReCheckTime?co.Page.Ready():co.User.Check().done((function(e){e.success?co.Page.Ready():location.href="/"})):"/"==location.pathname||/^\/Account/.test(location.pathname)?co.Page.Ready():location.href="/",$(".loader-wrapper").not(".incomponent").fadeOut(1e3,(function(){PreLoader=$(this).detach()}));var l;Array.prototype.slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map((function(e){return new bootstrap.Tooltip(e)})),Array.prototype.slice.call(document.querySelectorAll('[data-bs-toggle="popover"]')).map((function(e){return new bootstrap.Popover(e)}));if(e("body").delegate('[data-toggle="lightbox"]',"click",(function(t){t.preventDefault(),e(this).ekkoLightbox()})),$(".sidebar .active").length>0){var n=$(".sidebar .active").parents("li");n.length>0&&$(".sidebar .navigation").scrollTop(n.position().top)}e("body").delegate(".append-preloader","click",(function(){e(PreLoader).show(),e("body").append(PreLoader),setTimeout((function(){e(".loader-wrapper").fadeOut(1e3,(function(){PreLoader=e(this).detach()}))}),3e3)})),e("body").delegate('[data-toggle="loader"]',"click",(function(){var t=e(this).attr("data-target");e("#"+t).show()})),e("body").delegate(".toggle-sidebar","click",(function(){return e(".sidebar").toggleClass("collapsed"),"collapsed"===localStorage.getItem("asideMode")?localStorage.setItem("asideMode","expanded"):localStorage.setItem("asideMode","collapsed"),!1})),e("body").delegate(".logout","click",(function(e){e.preventDefault(),co.User.Logout()})),e("body").delegate(".hide-sidebar","click",(function(){l?(l.prependTo(".wrapper"),l=null):l=e(".sidebar").detach()})),$(".app-switcher .webitem").on("click",(function(e){e.preventDefault(),$(".active-app").removeClass("active-app"),$(".app-selected").remove(),$(this).find(".card").addClass("active-app"),$(this).find(".card-body").append('<span class="material-icons app-selected md-16">check</span>')})),$("#switchApp .switch").on("click",(function(){co.WebSite.exchange($(".active-app").first().data("id")).done((function(e){e.success&&(co.Cookie.Add("LastWebSite",e.message),location.reload())}))})),e.fn.setAsideMode=function(){null===localStorage.getItem("asideMode")||("collapsed"===localStorage.getItem("asideMode")?e(".sidebar").addClass("collapsed"):e(".sidebar").removeClass("collapsed"))},e(window).width()>768&&e.fn.setAsideMode(),e("body").delegate(".navigation li:has(.sub-nav) > a","click",(function(){return e(this).siblings(".sub-nav").slideToggle(),e(this).parent().toggleClass("open"),!1})),e("body").delegate(".navigation ul li:has(.sub-nav)","mouseover",(function(){if(e(".sidebar").hasClass("collapsed")){var t=e(this),o=e("> .sub-nav",t),a=t.position();o.css({top:a.top,left:a.left+t.outerWidth()})}})),e("body").delegate(".toggle-controls","click",(function(){e(".controls-wrapper").toggle().toggleClass("d-none")})),e("body").delegate('[data-toggle="toast"]',"click",(function(){var t=e(this).attr("data-alignment"),o=e(this).attr("data-placement"),a=e(this).attr("data-content"),l=e(this).attr("data-style");e(".toast."+t+"-"+o).length?e(".toast."+t+"-"+o).append('<div class="alert alert-dismissible fade show alert-'+l+' "> '+a+'<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true" class="material-icons md-18">clear</span></button></div>'):e("body").append('<div class="toast '+t+"-"+o+'"> <div class="alert alert-dismissible fade show alert-'+l+' "> '+a+'<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true" class="material-icons md-18">clear</span></button></div> </div>')})),e(".form-control-chosen").chosen({allow_single_deselect:!0,width:"100%"}),e(".form-control-chosen-required").chosen({allow_single_deselect:!1,width:"100%"}),e(".form-control-chosen-search-threshold-100").chosen({allow_single_deselect:!0,disable_search_threshold:100,width:"100%"}),e(".form-control-chosen-optgroup").chosen({width:"100%"}),e((function(){e('[title="clickable_optgroup"]').addClass("chosen-container-optgroup-clickable")})),e(document).delegate('[title="clickable_optgroup"] .group-result',"click",(function(){var t=e(this).nextUntil(".group-result").not(".result-selected");t.length?t.trigger("mouseup"):e(this).nextUntil(".group-result").each((function(){e('a.search-choice-close[data-option-array-index="'+e(this).data("option-array-index")+'"]').trigger("click")}))})),e.fn.removeClassStartingWith=function(t){return e(this).removeClass((function(e,o){return(o.match(new RegExp("\\S*"+t+"\\S*","g"))||[]).join(" ")})),this},e("body").delegate(".theme-changer","click",(function(){var t=e(this).attr("primary-color"),o=e(this).attr("sidebar-bg"),a=e(this).attr("logo-bg"),l=e(this).attr("header-bg");localStorage.setItem("primaryColor",t),localStorage.setItem("sidebarBg",o),localStorage.setItem("logoBg",a),localStorage.setItem("headerBg",l),e.fn.setThemeTone(t)})),e.fn.setThemeTone=function(t){if(null===localStorage.getItem("primaryColor"));else{if("light"===localStorage.getItem("sidebarBg")?e(".sidebar ").addClass("sidebar-light"):e(".sidebar").removeClass("sidebar-light"),"primary"===localStorage.getItem("primaryColor"))document.documentElement.style.setProperty("--theme-colors-primary","#4B89FC");else{var o=getComputedStyle(document.body).getPropertyValue("--theme-colors-"+localStorage.getItem("primaryColor"));document.documentElement.style.setProperty("--theme-colors-primary",o)}"white"===localStorage.getItem("logoBg")||"light"===localStorage.getItem("logoBg")?e(".sidebar .navbar").removeClassStartingWith("bg").removeClassStartingWith("navbar-dark").addClass("navbar-light bg-"+localStorage.getItem("logoBg")):e(".sidebar .navbar").removeClassStartingWith("bg").removeClassStartingWith("navbar-light").addClass("navbar-dark bg-"+localStorage.getItem("logoBg")),"light"===localStorage.getItem("headerBg")||"white"===localStorage.getItem("headerBg")?e(".header .navbar").removeClassStartingWith("bg").removeClassStartingWith("navbar-dark").addClass("navbar-light bg-"+localStorage.getItem("headerBg")):e(".header .navbar").removeClassStartingWith("bg").removeClassStartingWith("navbar-light").addClass("navbar-dark bg-"+localStorage.getItem("headerBg"))}},e.fn.setThemeTone(),$(".btn_gotop").on("click",(function(){$("html, body").animate({scrollTop:0},0)}))}(jQuery);