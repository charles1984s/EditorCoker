var MinutesSecond=6e4,MonthSecond=2592e6,Coker={Data:{DefauleUrl:"/Dashboard/index",Header:{Authorization:"Bearer "+$.cookie("token"),Secret:$.cookie("secret")},Time:{DataRetentionTime:30*MinutesSecond,DataRetentionLongTime:3*MonthSecond,ReCheckTime:20*MinutesSecond}},Cookie:{EffectiveTime:0,Add:function(e,t){var n=new Date;n.setTime(n.getTime()+co.Cookie.EffectiveTime),$.cookie(e,t,{path:"/",expires:n})},AddAll:function(e){for(var t in e)"object"!=typeof t&&_c.Cookie.Add(t,e[t])},Del:function(e){$.removeCookie(e,{path:"/"})},Get:function(e){return $.cookie(e)},DelAll:function(){var e=$.cookie();for(var t in e)"LastWebSite"!=t&&$.removeCookie(t,{path:"/"})}},Page:{Ready:function(){"/"!=location.pathname&&co.Cookie.Add("lastViewPage",location.pathname),"function"==typeof PageReady&&PageReady()}},WebSite:{exchange:function(e){var t=$.Deferred();return $.ajax({url:"/api/Website/Exchange",type:"POST",contentType:"application/json; charset=utf-8",headers:_c.Data.Header,data:JSON.stringify({Id:e}),dataType:"json"}).done((function(e){e.success&&(co.Cookie.EffectiveTime=co.Data.Time.DataRetentionLongTime,co.Cookie.Add("LastWebSite",e.message),co.Cookie.EffectiveTime=co.Data.Time.D),t.resolve(e)})),t.promise()}},User:{Login:function(e){var t=$.Deferred();return $.ajax({url:"/api/User/Login",type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(e),dataType:"json"}).done((function(e){co.Cookie.AddAll({token:e.token,secret:e.secret,endDateTime:new Date(e.endDateTime).getTime()}),t.resolve(e)})),t.promise()},Logout:function(){var e=$.Deferred();return $.ajax({url:"/api/User/Logout",type:"GET",contentType:"application/json; charset=utf-8",headers:_c.Data.Header,dataType:"json"}).done((function(t){t.success&&(_c.Cookie.DelAll(),location.href="/",e.resolve())})),e.promise()},Check:function(){var e=$.Deferred();return $.ajax({url:"/api/User/Chech",type:"POST",contentType:"application/json; charset=utf-8",headers:_c.Data.Header,dataType:"json"}).done((function(t){co.Cookie.AddAll({token:t.token,secret:t.secret,endDateTime:new Date(t.endDateTime).getTime()}),co.Cookie.EffectiveTime=co.Data.Time.DataRetentionLongTime,co.Cookie.Add("LastWebSite",co.Cookie.Get("LastWebSite")),co.Cookie.EffectiveTime=co.Data.Time.D,e.resolve(t)})).fail((function(){_c.Cookie.DelAll(),e.resolve()})),e.promise()}},sweet:{config:{timeout:1500},success:function(e,t,n){var o=!1;n&&(o=Coker.sweet.config.timeout),Swal.fire({icon:"success",html:e,showConfirmButton:!n,showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"確定",timer:o}).then((e=>{e.isConfirmed&&"function"==typeof t&&t()}))},error:function(e,t,n,o){var a=!1;o&&(a=Coker.sweet.config.timeout),Swal.fire({icon:"error",title:e,html:t,showConfirmButton:!o,showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"確定",reverseButtons:!0,timer:a}).then((e=>{e.isConfirmed&&"function"==typeof n&&n()}))},confirm:function(e,t,n,o,a){Swal.fire({icon:"info",title:e,html:t,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:n,cancelButtonText:o,reverseButtons:!0}).then((e=>{e.isConfirmed&&"function"==typeof a&&a()}))},draft_or_publish:function(e,t,n){Swal.fire({icon:"info",title:"儲成草稿或"+e+"？",showCancelButton:!0,confirmButtonColor:"#4B89FC",cancelButtonColor:"#FBB357",confirmButtonText:e,cancelButtonText:"存成草稿",reverseButtons:!0}).then((e=>{e.isConfirmed?n():e.dismiss===Swal.DismissReason.cancel&&t()}))}},Picker:{Init:function(e){e.daterangepicker({timePicker:!0,timePicker24Hour:!0,autoUpdateInput:!0,locale:{format:"YYYY/MM/DD HH:mm",separator:" ~ ",applyLabel:"　確認　",cancelLabel:"　取消　",daysOfWeek:["日","一","二","三","四","五","六"],monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]}}),e.on("cancel.daterangepicker",(function(e,t){$(this).val("")}))}},HtmlContent:{AddUp:function(e){return $.ajax({url:"/api/HtmlContent/AddUp",type:"POST",contentType:"application/json; charset=utf-8",headers:_c.Data.Header,data:JSON.stringify(e),dataType:"json"})},Get:function(e){return $.ajax({url:"/api/HtmlContent/GetOne/",type:"GET",contentType:"application/json; charset=utf-8",headers:_c.Data.Header,data:{id:e}})},Delete:function(e){return $.ajax({url:"/api/HtmlContent/Delete",type:"POST",contentType:"application/json; charset=utf-8",headers:_c.Data.Header,data:JSON.stringify(e),dataType:"json"})}},WebMesnus:{getAll:function(){return $.ajax({url:"/api/WebMenu/GetAll",type:"Get",contentType:"application/json; charset=utf-8",headers:_c.Data.Header,dataType:"json"})},createOrEdit:function(e){return $.ajax({url:"/api/WebMenu/CreateOrEdit",type:"Post",contentType:"application/json; charset=utf-8",headers:_c.Data.Header,data:JSON.stringify(e),dataType:"json"})},getConten:function(e){return $.ajax({url:"/api/WebMenu/GetConten",type:"Post",contentType:"application/json; charset=utf-8",headers:_c.Data.Header,data:JSON.stringify({id:e}),dataType:"json"})},saveConten:function(e){return $.ajax({url:"/api/WebMenu/saveConten",type:"Post",contentType:"application/json; charset=utf-8",headers:_c.Data.Header,data:JSON.stringify(e),dataType:"json"})},importConten:function(e){return $.ajax({url:"/api/WebMenu/importConten",type:"Post",contentType:"application/json; charset=utf-8",headers:_c.Data.Header,data:JSON.stringify(e),dataType:"json"})},delete:function(e){return $.ajax({url:"/api/WebMenu/Delete",type:"Post",contentType:"application/json; charset=utf-8",headers:_c.Data.Header,data:JSON.stringify({id:e}),dataType:"json"})},updateLevelAndSerNo:function(e){return $.ajax({url:"/api/WebMenu/updateLevelAndSerNo",type:"Post",contentType:"application/json; charset=utf-8",headers:_c.Data.Header,data:JSON.stringify({list:e}),dataType:"json"})}}},_c=Coker,co=Coker;co.Cookie.EffectiveTime=co.Data.Time.DataRetentionTime;