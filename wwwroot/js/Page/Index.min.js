function PageReady(){var e=grapesInit({save:function(e,s){var n=$.Deferred();return co.WebMesnus.saveConten({Id:$("#gjs").data("id"),SaveHtml:e,SaveCss:s}).done((function(e){e.success?n.resolve():co.sweet.error(e.error)})),n.promise()},import:function(e,s){var n=$.Deferred();return co.WebMesnus.importConten({Id:$("#gjs").data("id"),SaveHtml:e,SaveCss:s}).done((function(e){e.success?n.resolve():co.sweet.error(e.error)})),n.promise()},getComponer:function(){var e=$.Deferred();return co.HtmlContent.GetAllComponent().done((function(s){s.success?e.resolve(s.list):co.sweet.error(resutlt.error)})),e.promise()}}),s=new MenuEditor("myEditor",{textConfirmDelete:"是否確認將<span class='ConfirmKeyWord'>{0}</span>選單刪除?",listOptions:{placeholderCss:{"background-color":"#cccccc"}},iconPicker:{searchText:"Buscar...",labelHeader:"{0}/{1}"},maxLevel:-1,element:{Form:"#frmEdit",Update:"#btnUpdate",Add:"#btnAdd",Refresh:"#btnRefresh"},on:{edit:function(){n(),$("#btnUpdate").removeClass("d-none"),$("#btnRefresh,#btnAdd").addClass("d-none")},del:function(e){0==$("#myEditor>li").length&&($("#myEditor").addClass("d-none"),$("#myEditor + .emptyList").removeClass("d-none")),co.WebMesnus.delete(e.id).done((function(e){e.success?co.sweet.success("已成功刪除"):co.sweet.error(e.error)}))},add:function(e){var s=e.data();$("#myEditor").removeClass("d-none"),$("#myEditor + .emptyList").addClass("d-none"),co.WebMesnus.createOrEdit(s).done((function(e){e.success?(s.id=parseInt(e.message),co.sweet.success("新增成功")):co.sweet.error(e.error)}))},update:function(e){co.WebMesnus.createOrEdit(e).done((function(e){e.success?co.sweet.success("更新成功"):co.sweet.error(e.error)}))},save:function(){},drop:function(e){let s,n,o=[],t=e.parents("li"),r=t.last(),d=t.first(),a=e.parents("ul"),c=!1;s=0==d.length?null:d.data("id"),n=0==r.length?null:r.data("id"),e.data("fK_TopNodeId")==s&&e.data("fK_RootNodeId")==n||(e.data({fK_TopNodeId:s,fK_RootNodeId:n}),c=!0,o.push($(e).data())),a.children("li").each((function(s,n){var t=$(n).data("serNO");t!=s+1&&(t=s+1,$(n).data("serNO",t),$(n).data("id")!=e.data("id")?o.push($(n).data()):c||o.push($(n).data()))})),co.WebMesnus.updateLevelAndSerNo(o).done((function(e){e.success||co.sweet.error(e.error)}))},page:function(s){$("#gjs").data("id",s.id),$("#gjs").removeClass("d-none"),$("#gjs + .emptyList").addClass("d-none"),co.WebMesnus.getConten(s.id).done((function(s){s.success?(e.setComponents(co.Data.HtmlDecode(s.conten.saveHtml)),e.setStyle(s.conten.saveCss)):co.sweet.error(s.error)}))}}}),n=function(){0==$('#frmEdit [name="id"]').val()&&$("#btnClear").addClass("d-none"),$("#offcanvasSite").addClass("offcanvas-lg"),$("#MenuEditorForm").removeClass("d-none")};$("#offcanvasSite").on("show.bs.offcanvas",(function(){$("#offcanvasSite").removeClass("offcanvas-lg"),$("#MenuEditorForm").addClass("d-none")})),$("#btnExtend").on("click",(function(){n(),$('#frmEdit [name="id"]').val(0),$("#btnRefresh,#btnAdd").removeClass("d-none"),$("#btnUpdate").addClass("d-none"),$("#btnRefresh").trigger("click")})),co.WebMesnus.getAll().done((function(e){e.success?(s.setData(e.maps),$("#myEditor").removeClass("d-none"),e.maps.length>0?$("#myEditor + .emptyList").addClass("d-none"):$("#myEditor").addClass("d-none")):s.setData([])}))}