function PageReady(){const e=new bootstrap.Offcanvas("#offcanvasSite");var o=grapesInit({save:null,import:function(e,o){var t=$.Deferred();return co.ObjectType.SaveConten({Id:$("#gjs").data("id"),Html:e,Css:o}).done((function(e){e.success?t.resolve():co.sweet.error(e.error)})),t.promise()},getComponer:function(){var e=$.Deferred();return co.HtmlContent.GetAllComponent().done((function(o){o.success?e.resolve(o.list):co.sweet.error(resutlt.error)})),e.promise()}}),t=new MenuEditor("myEditor",{textConfirmDelete:"是否確認將<span class='ConfirmKeyWord'>{0}</span>分類刪除?",listOptions:{placeholderCss:{"background-color":"#cccccc"}},iconPicker:{searchText:"Buscar...",labelHeader:"{0}/{1}"},maxLevel:1,levelChang:!1,element:{Form:"#frmEdit",Update:"#btnUpdate",Add:"#btnAdd",Refresh:"#btnRefresh"},on:{ready:function(){co.WebMesnus.GetPageTypeList().done((function(e){if(e.success){const o=$("#PageType");$(e.type).each((function(){o.append(`<option value="${this.value}">${this.key}</option>`)})),o.on("change",(function(){2==$(this).val()?$("#RouterNameBlock").addClass("d-none").val("Home"):$("#RouterNameBlock").removeClass("d-none").val("")}))}}))},edit:function(){n(),$("#btnUpdate").removeClass("d-none"),$("#btnRefresh,#btnAdd").addClass("d-none")},del:function(e){0==$("#myEditor>li").length&&($("#myEditor").addClass("d-none"),$("#myEditor + .emptyList").removeClass("d-none")),co.ObjectType.delete(e.id).done((function(e){e.success?co.sweet.success("已成功刪除"):co.sweet.error(e.error)}))},add:function(e){var o=e.data();$("#myEditor").removeClass("d-none"),$("#myEditor + .emptyList").addClass("d-none"),co.WebMesnus.createOrEdit(o).done((function(e){e.success?(o.id=parseInt(e.message),co.sweet.success("新增成功")):co.sweet.error(e.error)}))},update:function(e){co.ObjectType.createOrEdit(e).done((function(e){e.success?co.sweet.success("更新成功"):co.sweet.error(e.error)}))},save:function(){},drop:function(e){let o,t,n=[],s=e.parents("li"),a=s.last(),d=s.first(),r=e.parents("ul"),c=!1;o=0==d.length?null:d.data("id"),t=0==a.length?null:a.data("id"),e.data("fK_TopNodeId")==o&&e.data("fK_RootNodeId")==t||(e.data({fK_TopNodeId:o,fK_RootNodeId:t}),c=!0,n.push($(e).data())),console.log(e),r.children("li").each((function(o,t){var s=$(t).data("serNO");s!=o+1&&(s=o+1,$(t).data("serNO",s),$(t).data("id")!=e.data("id")?n.push($(t).data()):c||n.push($(t).data()))})),co.ObjectType.updateSerNo(n).done((function(e){e.success||co.sweet.error(e.error)}))},page:function(t){$("#gjs").data("id",t.id),$("#gjs").removeClass("d-none"),$("#gjs + .emptyList").addClass("d-none"),co.ObjectType.getConten(t.id).done((function(n){if(n.success){var s=co.Data.HtmlDecode(n.conten.html);co.Grapes.setEditor(o,s,n.conten.css),$("body").addClass("grapesEdit"),$("#TopLine .title").text(t.text),e.hide()}else co.sweet.error(n.error)}))}}}),n=function(){0==$('#frmEdit [name="id"]').val()&&$("#btnClear").addClass("d-none"),$("#offcanvasSite").addClass("offcanvas-lg"),$("#MenuEditorForm").removeClass("d-none")},s=function(){$("#offcanvasSite").removeClass("offcanvas-lg"),$("#MenuEditorForm").addClass("d-none")};$("#offcanvasSite").on("show.bs.offcanvas",(function(){s()})),$("#offcanvasSite").on("click",".btn-close",(function(o){o.preventDefault(),$("#offcanvasSite.offcanvas-lg").length>0?s():e.hide()})),$("#btnExtend").on("click",(function(){n(),$('#frmEdit [name="id"]').val(0),$("#btnRefresh,#btnAdd").removeClass("d-none"),$("#btnUpdate").addClass("d-none"),$("#btnRefresh").trigger("click")})),co.ObjectType.GetAll().done((function(o){o.success?($(o.list).each(((e,o)=>{console.log(o);$("#classType").append(`<option value="${o.id}">${o.title}</option>`)})),t.setData(o.list),$("#myEditor").removeClass("d-none"),o.list.length>0?$("#myEditor + .emptyList").addClass("d-none"):$("#myEditor").addClass("d-none"),e.show()):t.setData([])}))}