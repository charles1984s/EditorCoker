var GroupList_dxData,TagList_dxData;function PageReady(){co.Tag={TagDelete:function(e){return $.ajax({url:"/api/Tag/TagDelete/",type:"GET",contentType:"application/json; charset=utf-8",headers:_c.Data.Header,data:{Id:e}})},TagGroupDelete:function(e){return $.ajax({url:"/api/Tag/TagGroupDelete/",type:"GET",contentType:"application/json; charset=utf-8",headers:_c.Data.Header,data:{Id:e}})}}}function contentReady(e){"GroupList"==e.element[0].id?GroupList_dxData=$("#GroupList").dxDataGrid("instance"):"TagList"==e.element[0].id&&(TagList_dxData=$("#TagList").dxDataGrid("instance"))}function groupSaved(e){TagList_dxData.refresh()}function editButtonClicked(e){e.component.option("editing.editRowKey",e.row.key)}function editButtonVisible(e){return!e.row.isEditing}function cellTemplate(e,t){var a=(t.value||[]).map((e=>t.column.lookup.calculateCellValue(e))).join(", ");e.text(a||" ").attr("title",a)}function calculateFilterExpression(e,t,a){return"search"===a&&"string"==typeof e?[this.dataField,"contains",e]:function(t){return-1!==(t.AssignedEmployee||[]).indexOf(e)}}function onSelectionChanged(e,t){var a=t.option("setValue"),n=e.selectedRowKeys[0];t.option("value",n),a(n),e.selectedRowKeys.length>0&&t.close()}function dataSaving(e){var t;if(void 0!==e.newData&&void 0!==e.newData.Title||void 0!==e.data&&void 0!==e.data.Title){void 0!==e.newData?t=e.newData.Title.substring(0,1):void 0!==e.data&&(t=e.data.Title.substring(0,1));-1=="~·`!！@#$￥%^…&*()（）—-_=+[]{}【】、|\\;:；：'\"“‘,./<>《》?？，。".indexOf(t)?(e.component.saveEditData(),GroupList_dxData.refresh(),TagList_dxData.refresh()):(e.cancel=!0,co.sweet.error("資料錯誤","標籤名稱不可以符號開頭",null,null))}else GroupList_dxData.refresh(),TagList_dxData.refresh()}function groupDeleteButtonClicked(e){co.sweet.confirm("刪除類別","確定刪除？類別刪除後不可復原","確　定","取　消",(function(){co.Tag.TagGroupDelete(e.row.key).done((function(){GroupList_dxData.refresh(),TagList_dxData.refresh()}))}))}function tagDeleteButtonClicked(e){co.sweet.confirm("刪除規格","確定刪除？標籤刪除後不可復原","確　定","取　消",(function(){co.Tag.TagDelete(e.row.key).done((function(){GroupList_dxData.refresh(),TagList_dxData.refresh()}))}))}