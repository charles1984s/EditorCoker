"use strict";$.fn.extend({GetPageJson:function(){let e={};const t=$(this);return t.find(".formItem").each((function(){const a=$(this),n=a.parents(".formItem");if(0==n.length||n.is(t)){const t=a.attr("name")||a.data("name")||a.attr("id");a.hasClass("list")?t&&t.indexOf("devexplress")<0?e[t]=a.data("component").option("dataSource"):e=a.data("component").option("dataSource"):"checkbox"==a.attr("type")?e[t]=a.prop("checked"):"TagSelected"==t?e[t]=tag_list:a.hasClass("image_upload")?e[t]=a.data("path"):"object"==a.data("type")?e[t]=a.GetPageJson():a.prop("disabled")&&a.data("default")?e[t]=a.data("default"):e[t]=a.val()}})),e},CokerMultiStepForm:function(e){const t=this,a={activeIndex:0,activeClass:"active",validate:{},hideBackButton:!1,allowUnvalidatedStep:!1,allowClickNavigation:!1,btn:{next:t.find('.msf-nav-button[data-type="next"]'),back:t.find('.msf-nav-button[data-type="back"]'),submit:t.find('.msf-nav-button[data-type="submit"]')},save:null},n=$.extend({},a,e),i=t.find(".msf-header .msf-step"),o=t.find(".msf-content .msf-view"),d=function(){i.removeClass(n.activeClass).eq(n.activeIndex).addClass(n.activeClass),o.removeClass(n.activeClass).eq(n.activeIndex).addClass(n.activeClass),0==n.activeIndex?(n.btn.back.addClass("d-none"),n.btn.next.removeClass("d-none"),n.btn.submit.addClass("d-none")):n.activeIndex==i.length-1?(n.btn.back.removeClass("d-none"),n.btn.next.addClass("d-none"),n.btn.submit.removeClass("d-none")):(n.btn.back.removeClass("d-none"),n.btn.next.removeClass("d-none"),n.btn.submit.addClass("d-none"))};return n.btn.next.on("click",(function(){n.activeIndex++,n.activeIndex>i.length-1&&(n.activeIndex=i.length-1),d()})),n.btn.back.on("click",(function(){n.activeIndex--,n.activeIndex<0&&(n.activeIndex=0),d()})),d(),t.on("coker-msf:viewChanged",(function(e,t){var a=Math.round(t.completedSteps/t.totalSteps*100);$(".progress-bar").css("width",a+"%").attr("aria-valuenow",a)})),t.getJson=function(){const e={};return o.each((function(){const t=$(this);if("main"===t.data("key"))co.Object.merge(e,t.GetPageJson());else e[t.data("key")]=t.GetPageJson()})),e},t.set=function(e){o.each((function(){const t=$(this);switch(t.data("key")){case"main":t.find(".title textarea").val(e.Title),t.find(".no input").val(e.no),e.LogoImage.File=null,ImageSetData(t.find(".image_upload").data("path",e.LogoImage),e.LogoImage);break;case"mainManu":const n=setInterval((function(){t.find(".dx-widget").data("component")&&(t.find(".dx-widget").data("component").option("dataSource",e.mainManu),clearInterval(n))}),100);break;default:if(e[t.data("key")]){var a=e[t.data("key")];if(a.Conten&&a.Conten.length>0){const e=t.find(".add-items");e.length>0?$(a.Conten).each((function(){e.data("palameter",{text:this}),e.trigger("click"),e.removeData("palameter")})):1==a.Conten.length&&t.find(".conten textarea").text(a.Conten[0])}if(a.More&&(t.find('[name="title"]').val(a.More.Title),t.find('[name="link"]').val(a.More.Link),t.find('[name="target"]').prop("checked",1==a.More.Target),t.find('[name="alert"]').val(a.More.Alert)),a.List&&t.find(".dx-widget").length>0){const e=setInterval((function(){t.find(".dx-widget").data("component")&&(t.find(".dx-widget").data("component").option("dataSource",a.List),clearInterval(e))}),100)}a.mainTitle&&t.find(".mainTitle textarea").text(a.mainTitle),a.Title&&t.find(".title textarea").val(a.Title),a.Visible&&t.find('[name="Visible"]').prop("checked",a.Visible),a.Line&&(t.find('.line [name="link"]').val(a.Line.Link),t.find('.line [name="alert"]').val(a.Line.Alert)),a.Home&&(t.find('.home [name="link"]').val(a.Home.Link),t.find('.home [name="alert"]').val(a.Home.Alert)),a.img&&ImageSetData(t.find(".image_upload:not(.ico)").data("path",e.LogoImage),a.img),a.icon&&ImageSetData(t.find(".image_upload.ico").data("path",e.LogoImage),a.icon)}}}))},t}});